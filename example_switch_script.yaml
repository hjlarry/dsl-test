name: "æ¡ä»¶å’Œè„šæœ¬èŠ‚ç‚¹æ¼”ç¤º"
version: "1.0"

global:
  threshold: "75"

nodes:
  # 1. Python ç”Ÿæˆéšæœºåˆ†æ•°
  - id: "generate_score"
    type: "script"
    name: "ç”Ÿæˆéšæœºåˆ†æ•°"
    params:
      language: "python"
      script: |
        import random
        score = random.randint(50, 100)
        print(score)

  # 2. æ¡ä»¶åˆ¤æ–­ï¼šåˆ†æ•°æ˜¯å¦åŠæ ¼
  - id: "check_pass"
    type: "switch"
    name: "æ£€æŸ¥æ˜¯å¦åŠæ ¼"
    needs: ["generate_score"]
    params:
      condition: "80 > {{ global.threshold }}"
      true_value: "âœ… åŠæ ¼"
      false_value: "âŒ ä¸åŠæ ¼"

  # 3. JavaScript å¤„ç†ç»“æœ
  - id: "process_result"
    type: "script"
    name: "JS å¤„ç†ç»“æœ"
    needs: ["check_pass"]
    params:
      language: "javascript"
      script: |
        const result = "{{ nodes.check_pass.output.value }}";
        const condition = {{ nodes.check_pass.output.result }};
        
        console.log("=".repeat(40));
        console.log("ğŸ“Š æˆç»©è¯„ä¼°ç»“æœ");
        console.log("=".repeat(40));
        console.log(`æ¡ä»¶æ»¡è¶³: ${condition}`);
        console.log(`è¯„ä¼°ç»“æœ: ${result}`);
        console.log("=".repeat(40));

  # 4. ç”ŸæˆæŠ¥å‘Š
  - id: "final_summary"
    type: "shell"
    name: "æœ€ç»ˆæ€»ç»“"
    needs: ["process_result"]
    params:
      command: |
        echo "ğŸ“ å·¥ä½œæµæ‰§è¡Œå®Œæˆ"
        echo "æ¡ä»¶èŠ‚ç‚¹å’Œè„šæœ¬èŠ‚ç‚¹éƒ½è¿è¡ŒæˆåŠŸï¼"
